nix --extra-experimental-features nix-command flakes build --out-link /tmp/nixos-rebuild.CFAkzp/nixos-rebuild .#nixosConfigurations."nixos".config.system.build.nixos-rebuild --verbose --show-trace --impure --option access-tokens github.com=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
error:
       … while calling the 'seq' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:359:18:
          358|         options = checked options;
          359|         config = checked (removeAttrs config [ "_module" ]);
             |                  ^
          360|         _module = checked (config._module);

       … while evaluating a branch condition
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:295:9:
          294|       checkUnmatched =
          295|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |         ^
          296|           let

       … in the left operand of the AND (&&) operator
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:295:72:
          294|       checkUnmatched =
          295|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |                                                                        ^
          296|           let

       … in the left operand of the AND (&&) operator
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:295:33:
          294|       checkUnmatched =
          295|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |                                 ^
          296|           let

       … while evaluating a branch condition
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:286:9:
          285|         in
          286|         if declaredConfig._module.freeformType == null then
             |         ^
          287|           declaredConfig

       … from call site
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:273:28:
          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                            ^
          274|

       … while calling 'mapAttrsRecursiveCond'
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/attrsets.nix:1177:14:
         1176|   mapAttrsRecursiveCond =
         1177|     cond: f: set:
             |              ^
         1178|     let

       … while calling the 'mapAttrs' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/attrsets.nix:1186:5:
         1185|     in
         1186|     recurse [ ] set;
             |     ^
         1187|

       … while evaluating the attribute 'matchedOptions'
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:856:15:
          855|     {
          856|       inherit matchedOptions;
             |               ^
          857|

       … while calling the 'mapAttrs' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:846:24:
          845|
          846|       matchedOptions = mapAttrs (n: v: v.matchedOptions) resultsByName;
             |                        ^
          847|

       … while calling the 'mapAttrs' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:794:23:
          793|
          794|       resultsByName = mapAttrs (
             |                       ^
          795|         name: decls:

       … while calling the 'zipAttrsWith' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:710:21:
          709|       # an attrset 'name' => list of submodules that declare ‘name’.
          710|       declsByName = zipAttrsWith (n: v: v) (
             |                     ^
          711|         map (

       … while calling the 'map' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:711:9:
          710|       declsByName = zipAttrsWith (n: v: v) (
          711|         map (
             |         ^
          712|           module:

       … from call site
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:265:30:
          264|         in
          265|         mergeModules prefix (reverseList collected);
             |                              ^
          266|

       … while calling 'reverseList'
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/lists.nix:1103:5:
         1102|   reverseList =
         1103|     xs:
             |     ^
         1104|     let

       … while calling the 'genList' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/lists.nix:1107:5:
         1106|     in
         1107|     genList (n: elemAt xs (l - n - 1)) l;
             |     ^
         1108|

       … while evaluating the second argument passed to builtins.genList

       … while calling the 'length' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/lists.nix:1105:11:
         1104|     let
         1105|       l = length xs;
             |           ^
         1106|     in

       … from call site
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:251:13:
          250|           collected =
          251|             collectModules class (specialArgs.modulesPath or "") (regularModules ++ [ internalModule ])
             |             ^
          252|               (

       … while calling anonymous lambda
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:522:34:
          521|     in
          522|     modulesPath: initialModules: args:
             |                                  ^
          523|     filterModules modulesPath (collectStructuredModules unknownModule "" initialModules args);

       … from call site
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:523:5:
          522|     modulesPath: initialModules: args:
          523|     filterModules modulesPath (collectStructuredModules unknownModule "" initialModules args);
             |     ^
          524|

       … while calling 'filterModules'
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:492:9:
          491|         modulesPath:
          492|         { disabled, modules }:
             |         ^
          493|         let

       … while calling the 'map' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:516:9:
          515|         in
          516|         map (attrs: attrs.module) (genericClosure {
             |         ^
          517|           startSet = keyFilter modules;

       … while calling the 'genericClosure' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:516:36:
          515|         in
          516|         map (attrs: attrs.module) (genericClosure {
             |                                    ^
          517|           startSet = keyFilter modules;

       … while calling the 'filter' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:517:22:
          516|         map (attrs: attrs.module) (genericClosure {
          517|           startSet = keyFilter modules;
             |                      ^
          518|           operator = attrs: keyFilter attrs.modules;

       … while calling anonymous lambda
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:514:31:
          513|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          514|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                               ^
          515|         in

       … in the argument of the not operator
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:514:39:
          513|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          514|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                                       ^
          515|         in

       … while calling the 'elem' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:514:39:
          513|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          514|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                                       ^
          515|         in

       … while calling the 'concatMap' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:513:26:
          512|
          513|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
             |                          ^
          514|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);

       … while calling the 'concatLists' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:453:24:
          452|           collectResults = modules: {
          453|             disabled = concatLists (catAttrs "disabled" modules);
             |                        ^
          454|             inherit modules;

       … while evaluating the attribute 'disabled'
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:453:13:
          452|           collectResults = modules: {
          453|             disabled = concatLists (catAttrs "disabled" modules);
             |             ^
          454|             inherit modules;

       (9 duplicate frames omitted)

       … while evaluating a branch condition
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:471:19:
          470|                 (
          471|                   if module.disabledModules != [ ] then
             |                   ^
          472|                     [

       … from call site
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:462:24:
          461|             let
          462|               module = checkModule (loadModule args parentFile "${parentKey}:anon-${toString n}" x);
             |                        ^
          463|               collectedImports = collectStructuredModules module._file module.key module.imports args;

       … while calling anonymous lambda
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:410:11:
          409|         if class != null then
          410|           m:
             |           ^
          411|           if m._class == null || m._class == class then

       … while evaluating a branch condition
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:411:11:
          410|           m:
          411|           if m._class == null || m._class == class then
             |           ^
          412|             m

       … in the left operand of the OR (||) operator
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:411:31:
          410|           m:
          411|           if m._class == null || m._class == class then
             |                               ^
          412|             m

       … from call site
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:462:37:
          461|             let
          462|               module = checkModule (loadModule args parentFile "${parentKey}:anon-${toString n}" x);
             |                                     ^
          463|               collectedImports = collectStructuredModules module._file module.key module.imports args;

       … while calling 'loadModule'
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:376:42:
          375|       loadModule =
          376|         args: fallbackFile: fallbackKey: m:
             |                                          ^
          377|         if isFunction m then

       … while evaluating a branch condition
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:377:9:
          376|         args: fallbackFile: fallbackKey: m:
          377|         if isFunction m then
             |         ^
          378|           unifyModuleSyntax fallbackFile fallbackKey (applyModuleArgs fallbackKey m args)

       … from call site
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:377:12:
          376|         args: fallbackFile: fallbackKey: m:
          377|         if isFunction m then
             |            ^
          378|           unifyModuleSyntax fallbackFile fallbackKey (applyModuleArgs fallbackKey m args)

       … while calling 'isFunction'
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/trivial.nix:1023:16:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                ^
         1024|

       … in the left operand of the OR (||) operator
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/trivial.nix:1023:41:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                                         ^
         1024|

       … while calling the 'isFunction' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/trivial.nix:1023:19:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                   ^
         1024|

       … while calling the 'elemAt' builtin
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/lists.nix:345:43:
          344|   */
          345|   imap1 = f: list: genList (n: f (n + 1) (elemAt list n)) (length list);
             |                                           ^
          346|

       … from call site
         at /nix/store/1gsxvdyd32wmqsbx9fh80jmbgjxqghs5-source/modules/nixos/base/nix-index.nix:6:5:
            5|     # https://github.com/nix-community/nix-index-database/issues/130
            6|     flake.inputs.nix-index-database.hmModules.nix-index
             |     ^
            7|   ];

       … while calling anonymous lambda
         at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:652:15:
          651|       extraArgs = mapAttrs (
          652|         name: _: addErrorContext (context name) (args.${name} or config._module.args.${name})
             |               ^
          653|       ) (functionArgs f);

       … while evaluating the module argument `flake' in "/nix/store/1gsxvdyd32wmqsbx9fh80jmbgjxqghs5-source/modules/nixos/base/nix-index.nix":

       error: infinite recursion encountered
       at /nix/store/58hq018zklzi0jyjfks7g4q02bckvp7j-source/lib/modules.nix:652:66:
          651|       extraArgs = mapAttrs (
          652|         name: _: addErrorContext (context name) (args.${name} or config._module.args.${name})
             |                                                                  ^
          653|       ) (functionArgs f);
